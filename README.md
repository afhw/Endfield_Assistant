# 终末地助手 (Endfield Assistant)

一款专为《明日方舟：终末地》设计的轻量化、工业级游戏辅助工具。基于 Python、OpenCV 和 PyQt6 开发，旨在通过自动化重复性的操作（如剧情跳过），提升玩家的游戏体验。

## ✨ 核心功能

*   **🚀 剧情自动跳过**：利用 OpenCV 图像识别技术，毫秒级识别并自动点击“跳过”及“确认”按钮。
*   **🖥️ 现代化 UI 交互**：基于 QFluentWidgets 构建的 Fluent Design 风格界面，支持动态热键配置与深色模式。
*   **🔍 智能进程监测**：自动检测游戏窗口焦点。当切换到桌面或其他应用时，助手会自动挂起，确保不干扰正常电脑使用。
*   **📝 实时悬浮日志**：提供可隐藏的半透明置顶日志窗口，实时反馈识别状态与点击记录。
*   **🛡️ 安全运行逻辑**：使用 PIL (Pillow) 高性能截图配合物理级模拟点击 (PyDirectInput)，提高识别稳定性。

## 🛠️ 技术栈

*   **GUI 框架**: `PyQt6`, `QFluentWidgets` (Fluent Design)
*   **图像处理**: `OpenCV` (Template Matching), `Pillow` (Screenshot)
*   **自动化控制**: `PyDirectInput` (DirectInput 模拟), `keyboard` (全局热键)
*   **系统监控**: `psutil` (进程状态管理)

## 📦 快速开始

### 1. 环境要求

*   **操作系统**: Windows 10/11
*   **运行环境**: Python 3.8 或更高版本
*   **权限需求**: 需要 **管理员权限** 运行（用于模拟 DirectInput 点击）

### 2. 安装依赖

在项目根目录下运行以下命令安装必要的库：
```bash
pip install pyqt6 qfluentwidgets opencv-python pydirectinput keyboard psutil pillow
```

### 3. 运行程序

```bash
python main.py
```

## 📖 使用指南

*   **准备模板图**：
    确保在程序目录下存在 `tpl_skip.png` (跳过按钮) 和 `tpl_confirm.png` (确认跳过弹窗按钮) 的截图模板。

*   **权限说明**：
    程序启动时会申请 **管理员权限**。这是必须的，否则 Windows 的权限隔离机制会阻止程序向游戏窗口发送点击指令。

*   **设置热键**：
    默认启动热键为 `F10`。你可以在主界面修改为任意键位并点击“更新热键”。

*   **运行监测**：
    启动服务后，请保持游戏为当前活动窗口。助手识别到目标图像后会自动执行操作。

## 🗺️ 开发计划 (Roadmap)

- [x] 核心 OpenCV 识别引擎
- [x] 多线程逻辑分离 (防止界面卡死)
- [x] 实时日志悬浮窗
- [ ] 大世界自动拾取功能 (F键自动化)
- [ ] 基于 YOLO 的目标检测方案

## ⚠️ 免责声明

> 本项目仅供学习交流使用，严禁用于任何商业用途。
>
> 使用第三方辅助工具可能存在被游戏官方封号的风险。开发者不对任何因使用本工具导致的账号封禁或其他后果负责。
>
> 本程序不包含任何恶意篡改游戏内存或封包的功能，仅通过图像识别模拟物理操作。

## 🤝 贡献与反馈

如果你有任何建议、Bug 反馈或想要加入开发，欢迎提交 **Issue** 或 **Pull Request**。
